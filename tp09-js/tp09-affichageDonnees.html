<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        function init(){
            let req=new XMLHttpRequest();
            req.open('GET','https://restcountries.com/v2/all?fields=name,languages,region,flag,population,currencies,capital');
            req.onreadystatechange = function(){
                console.log("ready stat changed:"+req.readyState);
                if(req.readyState==4&&req.status==200){
                    console.log("Données obtenues")
                    let data=req.responseText;
                    //let data=JSON.parse(req.responseText);
                    console.log(data);
                    let zoneAffichage=document.querySelector("#resultat");
                    zoneAffichage.innerHTML=data;
                }
            }
            req.send();
        }

        //  function init(){
        //     fetch('https://restcountries.com/v2/all?fields=name,languages,region,flag,population,currencies')
        //     .then(function(res) {
        //         //console.log(res);
        //         //on peut verifier le status de la reponse ici.
        //         return res.text();// génère une nouvelle promesse.
        //     })
        //     // .then(function (bodyText) {
        //     //     console.log(bodyText);
        //     // });
        //     // .then(function(res){
        //     //     return res.json();
        //     // })
        //     .then(function(body) {
        //         console.log(body);
        //         let zoneAffichage=document.querySelector("#resultat");
        //         zoneAffichage.innerHTML=body;
        //     });
        //  }

    </script>
</head>
<body onload="init()">
<!--<body>  -->
   <span id="resultat"></span>
</body>
</html>